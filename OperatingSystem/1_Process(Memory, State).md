## 프로세스란?

쉽게 말해 지금 실행중인 프로그램 이며, 운영체제 적으로는 **Job** 이라 불립니다.

- 디스크로부터 메모리에 적재되어 CPU을 할당을 받을 수 있는 상태입니다.
- 프로세스는 운영체제로부터 주소공간, 파일, 메모리 등을 할당 받습니다.

- 해당 프로세스가 CPU를 잡게 되면, Program Counter 인 Register가 프로세의 Code의 어느 한 부분을 가르키고, Code에서 Instruction, 즉 기계어를 하나씩 읽어 CPU 안으로 불러들이고 Register 안에 그 값을 넣습니다.
  산술 논리 연산장치에서 연산을 하나씩 수행하고 결과를 내부 Register나 밖의 Memory에 저장합니다.

![img](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/ddc6105c-099c-4c53-a61d-bd3988f4a61e/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220915%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20220915T023709Z&X-Amz-Expires=86400&X-Amz-Signature=c8e6051368595df54716a807ed6e064d0955e9cac2c1f994355d530432e1de8f&X-Amz-SignedHeaders=host&response-content-disposition=filename%20%3D%22Untitled.png%22&x-id=GetObject)





## 프로세스의 메모리 구조

- 메모리를 사용하려면 `malloc` 함수로 사용할 메모리 공간을 확보해야 합니다.

| TEXT (코드영역) 낮은 주소 (0에 가까운 주소)                  |
| :----------------------------------------------------------- |
| - 프로그램을 실행시키기 위해 구성되는 것들(코드)이 저장되는 공간으로, 명령문(제어문, 함수, 상수)들이 저장되어있습니다.<br />- 컴파일 타임에 결정되고, 중간에 코드 변경이 되지 않도록 Read-Only 형태로 저장됩니다. |

| DATA (GVAR / BSS) (text 다음 주소)                           |
| ------------------------------------------------------------ |
| - 작성한 코드에서 전역변수, 정적변수 등이 저장되는 공간으로, 메인함수 전(프로그램 실행 전)에 선언되어 프로그램이 끝날 때 까지 메모리에 남아있는 변수들 입니다.<br />- GVAR은 초기화 된 전역변수 / BSS는 초기화되지 않은 전역 변수 가 저장됩니다. |

| HEAP (동적 할당 영역) (data 다음 주소)                       |
| ------------------------------------------------------------ |
| - 사용자에 의해 관리되는 공간으로, 동적으로 할당 할 변수들이 저장됩니다.<br />- 유일하게 Heap만이 런타임에 결정됩니다.<br />- 데이터 크기가 확실하지 않을 때, 런타임에 메모리를 동적으로 할달 할 수 있는 `malloc` 이나 `calloc` 함수를 이용해 메모리 공간을 확보해야하고, 사용 후에는 반드시 메모리 해제를 해줘야합니다 만<br />Swift는 자동으로 메모리를 할당해주고, ARC를 통해 역시 자동으로 메모리에서 해제해줍니다.<br />- 예로 객체의 인스턴스가 있습니다. (객체의 인스턴스는 전부 힙에 저장)<br />- 낮은 주소에서 높은 주소로 할당됩니다. |

| STACK (지역변수 / 매개변수) (가장 높은 주소)                 |
| ------------------------------------------------------------ |
| - 함수를 호출할 때 지역변수, 매개변수들이 저장되는 공간으로, 메인 함수 안의 변수 또한 스택에 저장됩니다.<br />- 함수가 종료되면, 해당 함수에 할당 된 변수들을 메모리에서 해제시킵니다. (Stack 자료구조의 pop과 같은 기능)<br />- 높은 주소에서 낮은 주소로 메모리에 할당됩니다. |



<img src="/Users/jiheesmac/Desktop/무제.png" alt="무제" style="zoom: 67%;" />





## 프로세스의 상태

 프로세스는 상태가 변경되며 수행됩니다.

- `New` : Process가 생성중인 상태 입니다.

- `Ready` : 메모리 등 다른 조건을 모두 충족하고, 준비 큐에서 CPU를 기다리는 상태 입니다.
- `Running` : CPU를 잡고 Instruction을 수행중인 상태

- `wating` : I/O 이벤트가 발생했을 때 해당 이벤트가 처리되는 동안, 혹은 어떤 이벤트를 기다릴 때 Device queue 에서 대기하는 상태 입니다.
- `Terminated` : 수행(execution)이 끝나 프로세스에서 종료되어 CPU에서 제거되었을 때의 상태 입니다.